#!/bin/sh
#
# Git commit-msg hook: éªŒè¯æäº¤ä¿¡æ¯æ ¼å¼
# æ ¼å¼è¦æ±‚: <emoji> <type>: <ä¸­æ–‡æè¿°>
#

commit_msg_file=$1
commit_msg=$(cat "$commit_msg_file")

# æå–ç¬¬ä¸€è¡Œï¼ˆæ ‡é¢˜ï¼‰
title=$(echo "$commit_msg" | head -n 1)

# æ£€æŸ¥æ˜¯å¦åŒ…å«æœ‰æ•ˆçš„ type
valid=0

case "$title" in
    *"init:"*|*"release:"*|*"style:"*|*"feat:"*|*"fix:"*|*"docs:"*|*"refactor:"*|*"perf:"*|*"dx:"*|*"workflow:"*|*"types:"*|*"wip:"*|*"test:"*|*"build:"*|*"ci:"*|*"chore:"*|*"deps:"*)
        valid=1
        ;;
esac

if [ $valid -eq 0 ]; then
    echo ""
    echo "âŒ æäº¤ä¿¡æ¯æ ¼å¼é”™è¯¯!"
    echo ""
    echo "æ­£ç¡®æ ¼å¼: <emoji> <type>: <æè¿°>"
    echo ""
    echo "å¯ç”¨çš„ type:"
    echo "  ğŸ‰ init: åˆå§‹åŒ–"
    echo "  âœ¨ feat: æ·»åŠ æ–°åŠŸèƒ½"
    echo "  ğŸ› fix: ä¿®å¤ bug"
    echo "  ğŸ“ docs: æ–‡æ¡£ä¿®æ”¹"
    echo "  ğŸ¨ style: ä»£ç é£æ ¼ä¿®æ”¹"
    echo "  â™»ï¸ refactor: ä»£ç é‡æ„"
    echo "  âš¡ perf: æ€§èƒ½ä¼˜åŒ–"
    echo "  âœ… test: æµ‹è¯•ç”¨ä¾‹"
    echo "  ğŸ”¨ build: æ„å»ºç›¸å…³"
    echo "  ğŸ‘· ci: CI é…ç½®"
    echo "  â“ chore: å…¶å®ƒä¿®æ”¹"
    echo "  â¬†ï¸ deps: ä¾èµ–é¡¹ä¿®æ”¹"
    echo "  ğŸš€ release: å‘å¸ƒæ–°ç‰ˆæœ¬"
    echo ""
    echo "ç¤ºä¾‹: âœ¨ feat: æ·»åŠ ç”¨æˆ·ç™»å½•åŠŸèƒ½"
    echo ""
    echo "ä½ çš„æäº¤ä¿¡æ¯: $title"
    echo ""
    exit 1
fi

exit 0
